{% load humanize %}

<div class="form-container cash-register">
  <table class="table table-striped shadow" id="cashregister-table">
    <thead>
      <tr>
        <th scope="col"></th>
        <th scope="col">Venda</th>
        <th scope="col">Tipo de Pagamento</th>
        <th scope="col">Data/Hora</th>
        <th scope="col">Valor Total</th>
      </tr>
    </thead>
    <tbody>
      {% for sale in cashregister.sales.all  %}
      <tr>
        <th scope="row"></th>
        <td>
          <a href="{% url 'admin:Sales_sales_change' sale.pk %}" target="_blank"
          class="default-link" title="Visualizar Venda">
            Venda NÂº {{sale.pk}}
          </a>
        </td>
        <td>{{sale.payment_type.payment_name}}</td>
        <td>{{sale.created_at|naturaltime}}</td>
        <td>R$ {{sale.total_price}}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="cashregister-widgets">
    <div class="cashregister-cash">
      <i class="fa-solid fa-sack-dollar"></i>
      <span class="cash">R$ {{cashregister.cash}}</span>
    </div>
    <div class="clock-container">
      <i class="fa-regular fa-clock"></i>
      <span class="clock" id="clock"></span>
    </div>
  </div>

  <a href="{% url 'sales:create' %}" title="Nova Venda">
    <button type="button" class="form-button cash-register bg-primary">
      <span>Nova Venda <i class="fa-solid fa-plus"></i></span>
    </button>
  </a>

  <a href="#" title="Sangria de Caixa">
    <button type="button" class="form-button cash-register bg-secondary">
      <span>
        Sangria de Caixa <i class="fa-solid fa-hand-holding-dollar"></i>
      </span>
    </button>
  </a>

  <button type="button" class="form-button cash-register bg-danger"
  data-bs-toggle="modal" data-bs-target="#close-cashregister"
  title="Fechar Caixa">
    <span>Fechar Caixa <i class="fa-solid fa-ban"></i></span>
  </button>
  {% include "cashregister/partials/modals.html" %}
</div>
